<template>
  <div>
    <p class="text-green-600 mb-2">âœ… è¿™ä¸ªç»„ä»¶ä½¿ç”¨ useFetchï¼Œä¸ä¼šé‡å¤è¯·æ±‚</p>
    <div v-if="pending" class="text-gray-500">åŠ è½½ä¸­...</div>
    <div v-else-if="error" class="text-red-500">é”™è¯¯: {{ error }}</div>
    <div v-else>
      <p>å½“å‰æ—¶é—´: {{ data?.time }}</p>
      <p class="text-sm text-gray-600">è¯·æ±‚æ¬¡æ•°: {{ data?.requestCount }}</p>
      <p class="text-sm text-blue-600">æ‰§è¡Œç¯å¢ƒ: {{ data?.environment }}</p>
      <p class="text-sm text-gray-500">{{ data?.message }}</p>
    </div>
  </div>
</template>

<script setup>
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ useFetch ä¼šè‡ªåŠ¨å¤„ç† SSR å’Œå®¢æˆ·ç«¯æ°´åˆ
console.log('ğŸŸ¢ GoodFetchComponent: å¼€å§‹è¯·æ±‚æ•°æ®', process.client ? '(å®¢æˆ·ç«¯)' : '(æœåŠ¡ç«¯)')
const { data, pending, error } = await useFetch('/api/demo-data', {
  key: 'good-fetch-demo'
})
console.log('ğŸŸ¢ GoodFetchComponent: è¯·æ±‚å®Œæˆ', data.value)
</script> 